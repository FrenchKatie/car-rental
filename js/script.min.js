(function(){var c=document.getElementById("dateLeave");var v=document.getElementById("dateReturn");var f=document.getElementById("seats");var y=0;var B=0;var d=0;var p=0;var G=0;var n=0;var z=0;var w=0;var s=0;$("#pagepiling").pagepiling({navigation:false,keyboardScrolling:false});$.fn.pagepiling.setAllowScrolling(false);$("#confirmJourney").click(function(){$.fn.pagepiling.moveSectionDown()});$("#finalBtn").click(function(){window.location.reload()});$(".backBtn").click(function(){event.preventDefault();$.fn.pagepiling.moveSectionUp()});$("#backToSecTwo").click(function(){$("#confirmLocation").addClass("hide")});$("#sectionOneSubmitBtn").click(function(){event.preventDefault();I();a()});$(document).on("click",".moreInfoBtn",function(){$(this).next().slideToggle("done",function(){})});$(document).on("click",".vehicleConfirmBtn",function(){$.fn.pagepiling.moveSectionDown();if($(this)["0"].id=="confirmmotorbike"){$("#bookingVehicle").text(vehicleData[0].name);userPrice=A(w,s)*vehicleData[0].pricePerDay;$("#journeyVehiclePrice").text("$ "+userPrice)}else{if($(this)["0"].id=="confirmsmallCar"){$("#bookingVehicle").text(vehicleData[1].name);userPrice=A(w,s)*vehicleData[1].pricePerDay;$("#journeyVehiclePrice").text("$ "+userPrice)}else{if($(this)["0"].id=="confirmlargeCar"){$("#bookingVehicle").text(vehicleData[2].name);userPrice=A(w,s)*vehicleData[2].pricePerDay;$("#journeyVehiclePrice").text("$ "+userPrice)}else{if($(this)["0"].id=="confirmmotorhome"){$("#bookingVehicle").text(vehicleData[3].name);userPrice=A(w,s)*vehicleData[3].pricePerDay;$("#journeyVehiclePrice").text("$ "+userPrice)}}}}});$(".stopDoubleClick").on("click",function(M){M.preventDefault();var L=$(this);L.prop("disabled",true);setTimeout(function(){L.prop("disabled",false)},3000)});mapboxgl.accessToken="pk.eyJ1Ijoia2F0aWVmcmVuY2giLCJhIjoiY2ppM240MGFyMDA5cTNrbDJwNTkwYWZmOSJ9.vMh53hzHle4vA4uwg0TE6A";var t=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[173.839405,-41.18189],zoom:5});var b=new MapboxDirections({accessToken:"pk.eyJ1Ijoia2F0aWVmcmVuY2giLCJhIjoiY2ppM240MGFyMDA5cTNrbDJwNTkwYWZmOSJ9.vMh53hzHle4vA4uwg0TE6A",unit:"metric",profile:"mapbox/driving"});function E(){var L="https://api.mapbox.com/directions/v5/mapbox/driving/"+r[0]+","+r[1]+";"+j[0]+","+j[1]+"?geometries=geojson&access_token="+mapboxgl.accessToken;$.ajax({method:"GET",url:L}).done(function(M){u();$("#confirmLocation").click(function(){var O=document.getElementsByClassName("myItem");var N=document.getElementById("vehicleOptionTitle");g(O);g(N);F();x();$.fn.pagepiling.moveSectionDown()});H(M);t.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",geometry:G}},paint:{"line-width":2}});t.addLayer({id:"start",type:"circle",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:r}}}});t.addLayer({id:"end",type:"circle",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:j}}}})})}var q="mm/dd/yy",h=$("#dateLeave").datepicker({dateFormat:"dd/mm/yy",defaultDate:0,minDate:0,numberOfMonths:1}).on("change",function(){K.datepicker("option","minDate",k(this))}),K=$("#dateReturn").datepicker({dateFormat:"dd/mm/yy",defaultDate:0,minDate:0,numberOfMonths:1}).on("change",function(){h.datepicker("option","maxDate",k(this))});function k(P){var L="dd/mm/yy";var M=$("#dateLeave").datepicker({dateFormat:"mm/dd/yy"});var O;try{O=$.datepicker.parseDate(L,P.value)}catch(N){O=null}return O}function A(L,P){var O=new Date(L);var N=new Date(P);var Q=N.getTime()-O.getTime();var M=Math.ceil(Q/(1000*3600*24));return M}function I(){w=$("#dateLeave").datepicker("getDate");s=$("#dateReturn").datepicker("getDate");y=parseInt(f.value);if(w===null){$("#dateLeave").tooltip("show")}else{if(s===null){$("#dateReturn").tooltip("show")}else{if(A(w,s)>16){$("#dateReturn").attr("title","Maximum number of days to rent is 15").tooltip("_fixTitle").tooltip("show")}else{if(f.value===""){console.log(f.value);$("#seats").attr("title","You must select a required number of seats").tooltip("_fixTitle").tooltip("show")}else{if(y>6){$("#seats").attr("title","Maximum number of seats is 6").tooltip("_fixTitle").tooltip("show")}else{if(y<1){$("#seats").attr("title","Minimum number of seats is 1").tooltip("_fixTitle").tooltip("show")}else{if((A(w,s)===1&&y>2)||(y===1&&A(w,s)>10)||A(w,s)===0){alert("Sorry, there are no vehicles available for those requirements...")}else{$.fn.pagepiling.moveSectionDown()}}}}}}}}function i(){if(inputGroupSelect1.value==="choose"){$("#inputGroupSelect1").tooltip("show")}else{if(inputGroupSelect2.value==="choose"){$("#inputGroupSelect2").tooltip("show")}else{document.getElementById("confirmLocation").classList.remove("hide")}}}var e=document.getElementById("inputGroupSelect1");var m=document.getElementById("inputGroupSelect2");var J=e.value;var C=m.value;var D=document.getElementById("viewRoute");D.addEventListener("click",function(L){L.preventDefault();i();l();o();E()});var r=[];var j=[];function l(){if(e.value==="auckland"){r=[174.763332,-36.84846]}else{if(e.value==="wellington"){r=[174.776236,-41.28646]}else{if(e.value==="queenstown"){r=[168.662644,-45.031162]}}}}function o(){if(m.value==="auckland"){j=[174.763332,-36.84846]}else{if(m.value==="wellington"){j=[174.776236,-41.28646]}else{if(m.value==="queenstown"){j=[168.662644,-45.031162]}}}}function H(L){G=L.routes[0].geometry;n=L.routes[0].distance/1000}function u(){if(t.getLayer("route")){t.removeLayer("route");t.removeLayer("start");t.removeLayer("end");t.removeSource("route");t.removeSource("start");t.removeSource("end")}}function g(L){$(L).remove()}function F(){for(var M=0;M<vehicleData.length;M++){if(vehicleData[M].minSeats<=y&&vehicleData[M].maxSeats>=y&&vehicleData[M].minDays<=A(w,s)&&vehicleData[M].maxDays>=A(w,s)){var P="<div class='myItem row justify-content-between'>";P+="<div class='itemLabel col-2 centerMe'>";P+="<img src='images/"+vehicleData[M].type+"Icon.svg'>";P+="<p class='headingSix removeSpace'>"+vehicleData[M].name+"</p>";P+="</div>";P+="<button type='button' name='button' class='moreInfoBtn centerMe col-9'><span class='btnText '>View information</span><i class='icon fas fa-chevron-down test'></i></button>";P+="<div class='hide itemInformation fullWidth'>";P+="<div class='fullWidth itemGeneralInfo'>";P+="<h4 class='headingFive itemSubHeader'>General</h4>";P+="<div class='flexMe'>";P+="<p class='flexChildren'>Seats</p>";P+="<p class='flexChildren alignRight'>"+vehicleData[M].maxSeats+" seats</p>";P+="</div>";P+="<div class='flexMe'>";P+="<p class='flexChildren'>Rental cost per day</p>";P+="<p class='flexChildren alignRight'>$"+vehicleData[M].pricePerDay+"</p>";P+="</div>";P+="<div class='flexMe'>";P+="<p class='flexChildren'>Fuel consumption per 100km</p>";P+="<p class='flexChildren alignRight'>"+vehicleData[M].fuelKm+"L</p>";P+="</div>";P+="</div>";P+="<div class='fullWidth itemTripInfo'>";P+="<h4 class='headingFive itemSubHeader'>Your trip</h4>";P+="<div class='flexMe'>";P+="<p class='flexChildren'>Rental cost total</p>";P+="<p class='flexChildren alignRight'>$"+vehicleData[M].pricePerDay*A(w,s)+"</p>";P+="</div>";P+="<div class='flexMe'>";P+="<p class='flexChildren'>Estimated fuel consumption total</p>";P+="<p class='flexChildren alignRight'>"+Math.ceil(vehicleData[M].fuelKm*n)+"L</p>";P+="</div>";P+="</div>";P+="<button type='button' name='button' class='iconBtnFillWide vehicleConfirmBtn stopDoubleClick' id='confirm"+vehicleData[M].type+"'><span class='btnText col-12'>Select this vehicle</span><i class='iconWide fas fa-chevron-right'></i></button>";P+="</div>";P+="</div>";P+="</div>";var L=document.getElementById("itemsHeader");L.insertAdjacentHTML("afterEnd",P)}}var N="<h3 id='vehicleOptionTitle' class='headingFour'>You requested a vehicle with <span class='featureFont'>"+y+"</span> seats for a period of <span class='featureFont'>"+A(w,s)+"</span> days</h3>";var O=document.getElementById("mainItemsHeader");O.insertAdjacentHTML("afterEnd",N)}function x(){$("#bookingLeaveLoc").text(e.value);$("#bookingReturnLoc").text(m.value)}function a(){$("#bookingLeaveDate").text(c.value);$("#bookingReturnDate").text(v.value);$("#sectionFiveDate").text("We'll see you on "+c.value+" when you start your journey")}})();